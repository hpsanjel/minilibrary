datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id          Int          @id @default(autoincrement())
  name        String?
  email       String       @unique
  password    String
  phone       String?
  city        String?
  postalCode  String?
  address     String?
  role        Role         @default(STUDENT)
  verifiedUser String      @default("No")
  verificationToken String?
  verificationTokenExpires DateTime?
  transactions Transaction[]
}



model Book {
  id          Int          @id @default(autoincrement())
  title       String
  author      String
  isbn        String?      // ISBN is optional
  copies      Int          @default(1) // Number of copies, default 1
  available   Boolean      @default(true)
  coverUrl    String?      // Optional URL for book cover

  transactions Transaction[]
}

model Transaction {
  id        Int      @id @default(autoincrement())
  userId    Int
  bookId    Int
  returned  Boolean  @default(false)
  createdAt DateTime @default(now())
  deadline  DateTime?
  fine      Int      @default(0)

  returnedAt DateTime?
  condition  String?
  returnNotes String?

  user User @relation(fields: [userId], references: [id])
  book Book @relation(fields: [bookId], references: [id])
}



enum Role { 
  ADMIN
  STUDENT 
}
