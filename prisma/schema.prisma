generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id                       Int           @id @default(autoincrement())
  name                     String?
  email                    String        @unique
  password                 String
  phone                    String?
  city                     String?
  postalCode               String?
  address                  String?
  role                     Role          @default(STUDENT)
  verifiedUser             String        @default("No")
  verificationToken        String?
  verificationTokenExpires DateTime?
  transactions             Transaction[]
}

model Book {
  id           Int           @id @default(autoincrement())
  title        String
  author       String
  isbn         String?
  copies       Int           @default(1)
  available    Boolean       @default(true)
  coverUrl     String?
  transactions Transaction[]
}

model Transaction {
  id          Int       @id @default(autoincrement())
  userId      Int
  bookId      Int
  returned    Boolean   @default(false)
  createdAt   DateTime  @default(now())
  deadline    DateTime?
  fine        Int       @default(0)
  returnedAt  DateTime?
  condition   String?
  returnNotes String?
  book        Book      @relation(fields: [bookId], references: [id])
  user        User      @relation(fields: [userId], references: [id])
}

enum Role {
  ADMIN
  STUDENT
}
